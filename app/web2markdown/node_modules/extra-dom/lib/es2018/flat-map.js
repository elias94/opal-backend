"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.flatMap = void 0;
const utils_1 = require("./utils");
const remove_all_children_1 = require("./remove-all-children");
function flatMap(node, fn) {
    const newNodes = utils_1.cloneNodes(fn(utils_1.clone(node)));
    return newNodes.map(node => {
        const newChildNodes = [];
        for (const childNode of node.childNodes) {
            newChildNodes.push(...utils_1.cloneNodes(flatMap(childNode, fn)));
        }
        remove_all_children_1.removeAllChildren(node);
        utils_1.copyNodesToChildNodes(newChildNodes, node);
        return node;
    });
}
exports.flatMap = flatMap;
//# sourceMappingURL=flat-map.js.map